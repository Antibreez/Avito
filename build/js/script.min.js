"use strict";!function(){var e=Array.prototype.forEach,t=function(e){e.value=""};window.DomUtil={isHidden:function(e){return e.classList.contains("hidden")},show:function(e){e.classList.remove("hidden")},hide:function(e){e.classList.add("hidden")},clear:function(){e.call(arguments,t)},makeFragmentRender:function(e){return function(t){var n=document.createDocumentFragment();return t.forEach((function(t,r){n.appendChild(e(t,r))})),n}}}}(),function(){var e=function(e){return e?"http://134.209.138.34/item/"+e:"http://134.209.138.34/items"},t="GET",n=200,r=300,o=function(e,t){var o=new XMLHttpRequest;return o.timeout=1e4,o.responseType="json",o.addEventListener("load",(function(){!function(e){return e.status<n||e.status>r}(o)?e(o.response):t("Данные не загрузились. Причина: "+o.status+" "+o.statusText)})),o.addEventListener("error",(function(){t("Произошла ошибка соединения")})),o.addEventListener("timeout",(function(){t("Запрос не успел выполниться за "+o.timeout+"мс")})),o},i=function(e){e.remove()},c=function(e){var t=document.createElement("div");t.style="z-index: 100; margin: 0 auto; text-align: center; background-color: red;",t.style.position="absolute",t.style.left=0,t.style.right=0,t.style.fontSize="30px",t.textContent=e,document.body.insertAdjacentElement("afterbegin",t),window.setTimeout(i,2e3,t)};window.backend={loadAll:function(n,r){var i=o(n,r||c);i.open(t,e()),i.send()},loadCurrent:function(n,r,i){var a=o(r,i||c);a.open(t,e(n)),a.send()}}}(),function(e,t){var n=document.querySelector(".ad-current__title"),r=document.querySelector(".ad-current__address"),o=document.querySelector(".ad-current__description"),i=document.querySelector(".ad-current__name"),c=document.querySelector(".ad-current__price"),a=document.querySelector(".ad-current__full-image"),d=document.querySelector(".ad-current__previews");document.querySelector(".ad-current__exit");if(n){var u=document.querySelector("#preview").content.querySelector(".preview-container"),s=+localStorage.getItem("currentId"),l=t((function(e,t){var n=u.cloneNode(!0),r=t+1,o=n.querySelector(".preview");return o.src=e,o.alt="Фото "+r,n})),m=function(e){var t=e.target.classList.contains("preview")?e.target:null;t&&(a.src=t.src)};e.loadCurrent(s,(function(e){n.textContent=e[0].title,r.textContent=e[0].address,o.textContent=e[0].description,i.textContent=e[0].sellerName,c.textContent=e[0].price;var t=e[0].images;d.appendChild(l(t)),a.src=t[0],d.addEventListener("click",m)}))}}(window.backend,window.DomUtil.makeFragmentRender),function(e){var t=document.querySelector(".ads");if(t){var n=document.querySelector("#ad").content.querySelector(".ad"),r=e((function(e){var t=n.cloneNode(!0);return t.querySelector("h2").textContent=e.title,t.querySelector(".ad__preview").src=e.previewImage,t.querySelector(".ad__preview").alt=e.title,t.querySelector(".ad__address").textContent=e.address,t.querySelector(".ad__price").textContent=e.price,t.dataset.id=e.id,t})),o=function(){this._onItemClick=this._onItemClick.bind(this),this._removeEventListeners=this._removeEventListeners.bind(this),this._addEventListeners()};o.prototype.add=function(e){!function(e){t.appendChild(r(e))}(e)},o.prototype._onItemClick=function(e){var t=e.target.classList.contains("ad")?e.target:e.target.parentNode.classList.contains("ad")?e.target.parentNode:null;t&&(localStorage.setItem("currentId",+t.dataset.id),document.location.href="review.html",this._removeEventListeners())},o.prototype._addEventListeners=function(){t.addEventListener("click",this._onItemClick)},o.prototype._removeEventListeners=function(){t.removeEventListener("click",this._onItemClick)},window.Gallery=o}}(window.DomUtil.makeFragmentRender),function(e,t){if(t){var n=new t;e.loadAll((function(e){n.add(e)}))}}(window.backend,window.Gallery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRvbVV0aWwuanMiLCJiYWNrZW5kLmpzIiwicmV2aWV3LmpzIiwiZ2FsbGVyeS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiZm9yRWFjaCIsIkFycmF5IiwicHJvdG90eXBlIiwiY2xlYXJJbnB1dCIsImlucHV0IiwidmFsdWUiLCJ3aW5kb3ciLCJEb21VdGlsIiwiaXNIaWRkZW4iLCJlbGVtZW50IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJzaG93IiwicmVtb3ZlIiwiaGlkZSIsImFkZCIsImNsZWFyIiwiY2FsbCIsImFyZ3VtZW50cyIsIm1ha2VGcmFnbWVudFJlbmRlciIsInJlbmRlciIsImRhdGFMaXN0IiwiZnJhZ21lbnQiLCJkb2N1bWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJkYXRhIiwiaWR4IiwiYXBwZW5kQ2hpbGQiLCJnZXRSZXFVcmwiLCJpZCIsIlJlcU1ldGhvZCIsIlJlcVN0YXR1cyIsImNyZWF0ZVJlcXVlc3QiLCJvbkxvYWQiLCJvbkVycm9yIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJ0aW1lb3V0IiwicmVzcG9uc2VUeXBlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0YXR1cyIsImlzRXJyb3JTdGF0dXMiLCJyZXNwb25zZSIsInN0YXR1c1RleHQiLCJyZW1vdmVFbGVtZW50Iiwib25BbnlFcnJvciIsIm1lc3NhZ2UiLCJub2RlIiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwicG9zaXRpb24iLCJsZWZ0IiwicmlnaHQiLCJmb250U2l6ZSIsInRleHRDb250ZW50IiwiYm9keSIsImluc2VydEFkamFjZW50RWxlbWVudCIsInNldFRpbWVvdXQiLCJiYWNrZW5kIiwibG9hZEFsbCIsInJlcSIsIm9wZW4iLCJzZW5kIiwibG9hZEN1cnJlbnQiLCJ0aXRsZSIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRyZXNzIiwiZGVzY3JpcHRpb24iLCJuYW1lIiwicHJpY2UiLCJmdWxsSW1hZ2UiLCJwaG90b1ByZXZpZXciLCJpbWFnZVRlbXBsYXRlIiwiY29udGVudCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJnZXRJbWFnZXNGcmFnbWVudCIsImltYWdlU3JjIiwiY2xvbmVOb2RlIiwibnVtIiwiaW1hZ2UiLCJzcmMiLCJhbHQiLCJvblByZXZpZXdDbGljayIsImV2dCIsInRhcmdldCIsImFkIiwic2VsbGVyTmFtZSIsImltYWdlcyIsImFkTGlzdCIsImFkVGVtcGxhdGUiLCJnZXRBZEZyYWdtZW50IiwicHJldmlld0ltYWdlIiwiZGF0YXNldCIsIkdhbGxlcnkiLCJ0aGlzIiwiX29uSXRlbUNsaWNrIiwiYmluZCIsIl9yZW1vdmVFdmVudExpc3RlbmVycyIsIl9hZGRFdmVudExpc3RlbmVycyIsImFkcyIsInNldEFkcyIsInBhcmVudE5vZGUiLCJzZXRJdGVtIiwibG9jYXRpb24iLCJocmVmIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdhbGxlcnkiXSwibWFwcGluZ3MiOiJBQUFBLGNBRUEsV0FDQSxJQUFBQSxFQUFBQyxNQUFBQyxVQUFBRixRQUVBRyxFQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLE1BQUEsSUFHQUMsT0FBQUMsUUFBQSxDQUNBQyxTQUFBLFNBQUFDLEdBQ0EsT0FBQUEsRUFBQUMsVUFBQUMsU0FBQSxXQUdBQyxLQUFBLFNBQUFILEdBQ0FBLEVBQUFDLFVBQUFHLE9BQUEsV0FHQUMsS0FBQSxTQUFBTCxHQUNBQSxFQUFBQyxVQUFBSyxJQUFBLFdBR0FDLE1BQUEsV0FDQWhCLEVBQUFpQixLQUFBQyxVQUFBZixJQUdBZ0IsbUJBQUEsU0FBQUMsR0FDQSxPQUFBLFNBQUFDLEdBQ0EsSUFBQUMsRUFBQUMsU0FBQUMseUJBS0EsT0FKQUgsRUFBQXJCLFNBQUEsU0FBQXlCLEVBQUFDLEdBQ0FKLEVBQUFLLFlBQUFQLEVBQUFLLEVBQUFDLE9BR0FKLEtBL0JBLEdDQUEsV0FLQSxJQUFBTSxFQUFBLFNBQUFDLEdBQ0EsT0FBQUEsRUFBQSw4QkFBQUEsRUFBQSwrQkFHQUMsRUFDQSxNQUdBQyxFQUNBLElBREFBLEVBRUEsSUFVQUMs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RUF4RixPQUFBQyxRQUFBWSxvQkNoRUEsU0FDQXVDLEVBQ0FvQyxHQUVBLEdBQUFBLEVBQUEsQ0FJQSxJQUFBYSxFQUFBLElBQUFiLEVBTUFwQyxFQUFBQyxTQUpBLFNBQUF5QyxHQUNBTyxFQUFBNUYsSUFBQXFGLE9BWEEsQ0FpQkE5RixPQUFBb0QsUUFDQXBELE9BQUF3RiIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgZm9yRWFjaCA9IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoO1xuXG4gIHZhciBjbGVhcklucHV0ID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgaW5wdXQudmFsdWUgPSAnJztcbiAgfTtcblxuICB3aW5kb3cuRG9tVXRpbCA9IHtcbiAgICBpc0hpZGRlbjogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJyk7XG4gICAgfSxcblxuICAgIHNob3c6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIH0sXG5cbiAgICBoaWRlOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICB9LFxuXG4gICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvckVhY2guY2FsbChhcmd1bWVudHMsIGNsZWFySW5wdXQpO1xuICAgIH0sXG5cbiAgICBtYWtlRnJhZ21lbnRSZW5kZXI6IGZ1bmN0aW9uIChyZW5kZXIpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0YUxpc3QpIHtcbiAgICAgICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICBkYXRhTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChkYXRhLCBpZHgpIHtcbiAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChyZW5kZXIoZGF0YSwgaWR4KSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBmcmFnbWVudDtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufSkoKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcbiAgLy8gdmFyIFJlcVVybCA9IHtcbiAgLy8gICBHRVQ6ICdodHRwOi8vMTM0LjIwOS4xMzguMzQvaXRlbXMnLFxuICAvLyB9O1xuXG4gIHZhciBnZXRSZXFVcmwgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICByZXR1cm4gaWQgPyAnaHR0cDovLzEzNC4yMDkuMTM4LjM0L2l0ZW0vJyArIGlkIDogJ2h0dHA6Ly8xMzQuMjA5LjEzOC4zNC9pdGVtcyc7XG4gIH07XG5cbiAgdmFyIFJlcU1ldGhvZCA9IHtcbiAgICBHRVQ6ICdHRVQnLFxuICB9O1xuXG4gIHZhciBSZXFTdGF0dXMgPSB7XG4gICAgT0s6IDIwMCxcbiAgICBNVUxUSVBMRV9DSE9JQ0VTOiAzMDAsXG4gIH07XG5cbiAgdmFyIFRJTUVPVVQgPSAxMDAwMDtcblxuICB2YXIgaXNFcnJvclN0YXR1cyA9IGZ1bmN0aW9uICh4aHIpIHtcbiAgICByZXR1cm4geGhyLnN0YXR1cyA8IFJlcVN0YXR1cy5PS1xuICAgICAgfHwgeGhyLnN0YXR1cyA+IFJlcVN0YXR1cy5NVUxUSVBMRV9DSE9JQ0VTO1xuICB9O1xuXG4gIHZhciBjcmVhdGVSZXF1ZXN0ID0gZnVuY3Rpb24gKG9uTG9hZCwgb25FcnJvcikge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIHhoci50aW1lb3V0ID0gVElNRU9VVDtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuXG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaXNFcnJvclN0YXR1cyh4aHIpKSB7XG4gICAgICAgIG9uRXJyb3IoJ9CU0LDQvdC90YvQtSDQvdC1INC30LDQs9GA0YPQt9C40LvQuNGB0YwuINCf0YDQuNGH0LjQvdCwOiAnICsgeGhyLnN0YXR1cyArICcgJyArIHhoci5zdGF0dXNUZXh0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBvbkxvYWQoeGhyLnJlc3BvbnNlKTtcbiAgICB9KTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG9uRXJyb3IoJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAg0YHQvtC10LTQuNC90LXQvdC40Y8nKTtcbiAgICB9KTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCd0aW1lb3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgb25FcnJvcign0JfQsNC/0YDQvtGBINC90LUg0YPRgdC/0LXQuyDQstGL0L/QvtC70L3QuNGC0YzRgdGPINC30LAgJyArIHhoci50aW1lb3V0ICsgJ9C80YEnKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB4aHI7XG4gIH07XG5cbiAgdmFyIHJlbW92ZUVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gIH07XG5cbiAgdmFyIG9uQW55RXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbm9kZS5zdHlsZSA9ICd6LWluZGV4OiAxMDA7IG1hcmdpbjogMCBhdXRvOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJhY2tncm91bmQtY29sb3I6IHJlZDsnO1xuICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIG5vZGUuc3R5bGUubGVmdCA9IDA7XG4gICAgbm9kZS5zdHlsZS5yaWdodCA9IDA7XG4gICAgbm9kZS5zdHlsZS5mb250U2l6ZSA9ICczMHB4JztcblxuICAgIG5vZGUudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgbm9kZSk7XG4gICAgd2luZG93LnNldFRpbWVvdXQocmVtb3ZlRWxlbWVudCwgMjAwMCwgbm9kZSk7XG4gIH07XG5cbiAgd2luZG93LmJhY2tlbmQgPSB7XG4gICAgbG9hZEFsbDogZnVuY3Rpb24gKG9uTG9hZCwgb25FcnJvcikge1xuICAgICAgdmFyIHJlcSA9IGNyZWF0ZVJlcXVlc3Qob25Mb2FkLCBvbkVycm9yIHx8IG9uQW55RXJyb3IpO1xuICAgICAgcmVxLm9wZW4oUmVxTWV0aG9kLkdFVCwgZ2V0UmVxVXJsKCkpO1xuICAgICAgcmVxLnNlbmQoKTtcbiAgICB9LFxuXG4gICAgbG9hZEN1cnJlbnQ6IGZ1bmN0aW9uIChpZCwgb25Mb2FkLCBvbkVycm9yKSB7XG4gICAgICB2YXIgcmVxID0gY3JlYXRlUmVxdWVzdChvbkxvYWQsIG9uRXJyb3IgfHwgb25BbnlFcnJvcik7XG4gICAgICByZXEub3BlbihSZXFNZXRob2QuR0VULCBnZXRSZXFVcmwoaWQpKTtcbiAgICAgIHJlcS5zZW5kKCk7XG4gICAgfVxuICB9O1xufSkoKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uIChcbiAgICBiYWNrZW5kLFxuICAgIG1ha2VGcmFnbWVudFJlbmRlclxuKXtcbiAgdmFyIHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkLWN1cnJlbnRfX3RpdGxlJyk7XG4gIHZhciBhZGRyZXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkLWN1cnJlbnRfX2FkZHJlc3MnKTtcbiAgdmFyIGRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkLWN1cnJlbnRfX2Rlc2NyaXB0aW9uJyk7XG4gIHZhciBuYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkLWN1cnJlbnRfX25hbWUnKTtcbiAgdmFyIHByaWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkLWN1cnJlbnRfX3ByaWNlJyk7XG4gIHZhciBmdWxsSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWQtY3VycmVudF9fZnVsbC1pbWFnZScpO1xuICB2YXIgcGhvdG9QcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkLWN1cnJlbnRfX3ByZXZpZXdzJyk7XG4gIHZhciBleGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkLWN1cnJlbnRfX2V4aXQnKTtcblxuICBpZiAoIXRpdGxlKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGltYWdlVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJldmlldycpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLnByZXZpZXctY29udGFpbmVyJyk7XG5cbiAgdmFyIGlkID0gK2xvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50SWQnKTtcblxuICB2YXIgcmVuZGVySW1hZ2UgPSBmdW5jdGlvbiAoaW1hZ2VTcmMsIGlkeCkge1xuICAgIHZhciBub2RlID0gaW1hZ2VUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdmFyIG51bSA9IGlkeCArIDE7XG4gICAgdmFyIGltYWdlID0gbm9kZS5xdWVyeVNlbGVjdG9yKCcucHJldmlldycpO1xuXG4gICAgaW1hZ2Uuc3JjID0gaW1hZ2VTcmM7XG4gICAgaW1hZ2UuYWx0ID0gJ9Ck0L7RgtC+ICcgKyBudW07XG5cbiAgICByZXR1cm4gbm9kZTtcbiAgfTtcblxuICB2YXIgZ2V0SW1hZ2VzRnJhZ21lbnQgPSBtYWtlRnJhZ21lbnRSZW5kZXIocmVuZGVySW1hZ2UpO1xuXG4gIHZhciBvblByZXZpZXdDbGljayA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICB2YXIgdGFyZ2V0ID0gZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3ByZXZpZXcnKSA/IGV2dC50YXJnZXRcbiAgICAgIDogbnVsbDtcblxuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIGZ1bGxJbWFnZS5zcmMgPSB0YXJnZXQuc3JjO1xuICAgIH1cbiAgfTtcblxuICB2YXIgb25FeGl0Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgcGhvdG9QcmV2aWV3LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25QcmV2aWV3Q2xpY2spO1xuICB9XG5cbiAgdmFyIG9uQWRMb2FkID0gZnVuY3Rpb24gKGFkKSB7XG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSBhZFswXS50aXRsZTtcbiAgICBhZGRyZXNzLnRleHRDb250ZW50ID0gYWRbMF0uYWRkcmVzcztcbiAgICBkZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGFkWzBdLmRlc2NyaXB0aW9uO1xuICAgIG5hbWUudGV4dENvbnRlbnQgPSBhZFswXS5zZWxsZXJOYW1lO1xuICAgIHByaWNlLnRleHRDb250ZW50ID0gYWRbMF0ucHJpY2U7XG5cbiAgICB2YXIgaW1hZ2VzID0gYWRbMF0uaW1hZ2VzO1xuXG4gICAgcGhvdG9QcmV2aWV3LmFwcGVuZENoaWxkKGdldEltYWdlc0ZyYWdtZW50KGltYWdlcykpO1xuICAgIGZ1bGxJbWFnZS5zcmMgPSBpbWFnZXNbMF07XG5cbiAgICBwaG90b1ByZXZpZXcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblByZXZpZXdDbGljayk7XG4gIH07XG5cbiAgYmFja2VuZC5sb2FkQ3VycmVudChpZCwgb25BZExvYWQpO1xufSkoXG4gICAgd2luZG93LmJhY2tlbmQsXG4gICAgd2luZG93LkRvbVV0aWwubWFrZUZyYWdtZW50UmVuZGVyXG4pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKFxuICBtYWtlRnJhZ21lbnRSZW5kZXJcbil7XG4gIHZhciBhZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRzJyk7XG5cbiAgaWYgKCFhZExpc3QpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgYWRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZCcpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmFkJyk7XG5cbiAgdmFyIHJlbmRlckFkID0gZnVuY3Rpb24gKGFkKSB7XG4gICAgdmFyIG5vZGUgPSBhZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgICBub2RlLnF1ZXJ5U2VsZWN0b3IoJ2gyJykudGV4dENvbnRlbnQgPSBhZC50aXRsZTtcbiAgICBub2RlLnF1ZXJ5U2VsZWN0b3IoJy5hZF9fcHJldmlldycpLnNyYyA9IGFkLnByZXZpZXdJbWFnZTtcbiAgICBub2RlLnF1ZXJ5U2VsZWN0b3IoJy5hZF9fcHJldmlldycpLmFsdCA9IGFkLnRpdGxlO1xuICAgIG5vZGUucXVlcnlTZWxlY3RvcignLmFkX19hZGRyZXNzJykudGV4dENvbnRlbnQgPSBhZC5hZGRyZXNzO1xuICAgIG5vZGUucXVlcnlTZWxlY3RvcignLmFkX19wcmljZScpLnRleHRDb250ZW50ID0gYWQucHJpY2U7XG4gICAgbm9kZS5kYXRhc2V0LmlkID0gYWQuaWQ7XG5cbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIHZhciBnZXRBZEZyYWdtZW50ID0gbWFrZUZyYWdtZW50UmVuZGVyKHJlbmRlckFkKTtcblxuICB2YXIgc2V0QWRzID0gZnVuY3Rpb24gKGFkcykge1xuICAgIGFkTGlzdC5hcHBlbmRDaGlsZChnZXRBZEZyYWdtZW50KGFkcykpO1xuICB9O1xuXG4gIHZhciBHYWxsZXJ5ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX29uSXRlbUNsaWNrID0gdGhpcy5fb25JdGVtQ2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycyA9IHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuICB9O1xuXG4gIEdhbGxlcnkucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChhZHMpIHtcbiAgICBzZXRBZHMoYWRzKTtcbiAgfTtcblxuICBHYWxsZXJ5LnByb3RvdHlwZS5fb25JdGVtQ2xpY2sgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgdmFyIHRhcmdldCA9IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhZCcpID8gZXZ0LnRhcmdldFxuICAgICAgOiBldnQudGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdhZCcpID8gZXZ0LnRhcmdldC5wYXJlbnROb2RlXG4gICAgICA6IG51bGw7XG5cbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudElkJywgK3RhcmdldC5kYXRhc2V0LmlkKTtcblxuICAgICAgZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9ICdyZXZpZXcuaHRtbCc7XG5cbiAgICAgIHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuICB9O1xuXG4gIEdhbGxlcnkucHJvdG90eXBlLl9hZGRFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICBhZExpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9vbkl0ZW1DbGljayk7XG4gIH07XG5cbiAgR2FsbGVyeS5wcm90b3R5cGUuX3JlbW92ZUV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xuICAgIGFkTGlzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX29uSXRlbUNsaWNrKTtcbiAgfTtcblxuICB3aW5kb3cuR2FsbGVyeSA9IEdhbGxlcnk7XG59KShcbiAgICB3aW5kb3cuRG9tVXRpbC5tYWtlRnJhZ21lbnRSZW5kZXJcbik7XG4iLCIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoXG4gICAgYmFja2VuZCxcbiAgICBHYWxsZXJ5XG4pIHtcbiAgaWYgKCFHYWxsZXJ5KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGdhbGxlcnkgPSBuZXcgR2FsbGVyeSgpO1xuXG4gIGZ1bmN0aW9uIG9uQWRzTG9hZCAoYWRzKSB7XG4gICAgZ2FsbGVyeS5hZGQoYWRzKTtcbiAgfVxuXG4gIGJhY2tlbmQubG9hZEFsbChvbkFkc0xvYWQpO1xuXG59KShcbiAgICB3aW5kb3cuYmFja2VuZCxcbiAgICB3aW5kb3cuR2FsbGVyeVxuKTtcblxuIl19
